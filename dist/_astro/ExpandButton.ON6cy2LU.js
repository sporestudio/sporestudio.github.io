import{j as a}from"./jsx-runtime.7faW4zRM.js";import{r as n}from"./index.DhYZZe0J.js";import{M as z,u as M,P as S,b as I,L as N,m as k}from"./proxy.iVRnTgGk.js";class $ extends n.Component{getSnapshotBeforeUpdate(s){const e=this.props.childRef.current;if(e&&s.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B({children:r,isPresent:s}){const e=n.useId(),o=n.useRef(null),p=n.useRef({width:0,height:0,top:0,left:0}),{nonce:C}=n.useContext(z);return n.useInsertionEffect(()=>{const{width:h,height:t,top:u,left:f}=p.current;if(s||!o.current||!h||!t)return;o.current.dataset.motionPopId=e;const c=document.createElement("style");return C&&(c.nonce=C),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${t}px !important;
            top: ${u}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[s]),a.jsx($,{isPresent:s,childRef:o,sizeRef:p,children:n.cloneElement(r,{ref:o})})}const D=({children:r,initial:s,isPresent:e,onExitComplete:o,custom:p,presenceAffectsLayout:C,mode:h})=>{const t=M(K),u=n.useId(),f=n.useCallback(l=>{t.set(l,!0);for(const g of t.values())if(!g)return;o&&o()},[t,o]),c=n.useMemo(()=>({id:u,initial:s,isPresent:e,custom:p,onExitComplete:f,register:l=>(t.set(l,!1),()=>t.delete(l))}),C?[Math.random(),f]:[e,f]);return n.useMemo(()=>{t.forEach((l,g)=>t.set(g,!1))},[e]),n.useEffect(()=>{!e&&!t.size&&o&&o()},[e]),h==="popLayout"&&(r=a.jsx(B,{isPresent:e,children:r})),a.jsx(S.Provider,{value:c,children:r})};function K(){return new Map}const v=r=>r.key||"";function b(r){const s=[];return n.Children.forEach(r,e=>{n.isValidElement(e)&&s.push(e)}),s}const U=({children:r,exitBeforeEnter:s,custom:e,initial:o=!0,onExitComplete:p,presenceAffectsLayout:C=!0,mode:h="sync"})=>{const t=n.useMemo(()=>b(r),[r]),u=t.map(v),f=n.useRef(!0),c=n.useRef(t),l=M(()=>new Map),[g,L]=n.useState(t),[m,E]=n.useState(t);I(()=>{f.current=!1,c.current=t;for(let d=0;d<m.length;d++){const i=v(m[d]);u.includes(i)?l.delete(i):l.get(i)!==!0&&l.set(i,!1)}},[m,u.length,u.join("-")]);const w=[];if(t!==g){let d=[...t];for(let i=0;i<m.length;i++){const x=m[i],j=v(x);u.includes(j)||(d.splice(i,0,x),w.push(x))}h==="wait"&&w.length&&(d=w),E(b(d)),L(t);return}const{forceRender:y}=n.useContext(N);return a.jsx(a.Fragment,{children:m.map(d=>{const i=v(d),x=t===m||u.includes(i),j=()=>{if(l.has(i))l.set(i,!0);else return;let R=!0;l.forEach(P=>{P||(R=!1)}),R&&(y?.(),E(c.current),p&&p())};return a.jsx(D,{isPresent:x,initial:!f.current||o?void 0:!1,custom:x?void 0:e,presenceAffectsLayout:C,mode:h,onExitComplete:x?void 0:j,children:d},i)})})};function G({children:r}){const[s,e]=n.useState(!1);return a.jsxs("div",{className:"relative",children:[a.jsx(U,{initial:!1,children:a.jsxs(k.div,{initial:"collapsed",animate:s?"expanded":"collapsed",exit:"collapsed",variants:{expanded:{height:"auto"},collapsed:{height:"50px"}},transition:{duration:.5,ease:[.04,.62,.23,.98]},className:"relative flex flex-col gap-4 overflow-hidden",children:[r,!s&&a.jsx(k.div,{className:"absolute bottom-0 h-12 w-full bg-gradient-to-t from-white dark:from-black",initial:{opacity:1},exit:{opacity:0}})]},"content")}),a.jsxs("button",{onClick:()=>e(!s),className:"group/more flex w-fit cursor-pointer items-center justify-center gap-1.5 text-xs text-black/80 underline duration-300 hover:text-black hover:transition-colors dark:text-white/80 dark:hover:text-white",children:[a.jsx("span",{children:s?"Show less":"Show more"}),a.jsx(k.svg,{animate:{rotate:s?180:0},transition:{duration:.3},className:"h-4 w-4 duration-200 ease-out group-hover/more:translate-y-0.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]})]})}export{G as default};
