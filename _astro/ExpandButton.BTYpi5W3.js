import{j as a}from"./jsx-runtime.C8tID1Hn.js";import{r as t}from"./index.5XC2200L.js";import{M as I,u as P,P as N,a as $,b as B,L as D,m as E}from"./proxy.ChPPdUhR.js";class K extends t.Component{getSnapshotBeforeUpdate(n){const e=this.props.childRef.current;if(e&&n.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=e.offsetHeight||0,s.width=e.offsetWidth||0,s.top=e.offsetTop,s.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:o,isPresent:n}){const e=t.useId(),s=t.useRef(null),C=t.useRef({width:0,height:0,top:0,left:0}),{nonce:h}=t.useContext(I);return t.useInsertionEffect(()=>{const{width:u,height:i,top:p,left:r}=C.current;if(n||!s.current||!u||!i)return;s.current.dataset.motionPopId=e;const d=document.createElement("style");return h&&(d.nonce=h),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${i}px !important;
            top: ${p}px !important;
            left: ${r}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[n]),a.jsx(K,{isPresent:n,childRef:s,sizeRef:C,children:t.cloneElement(o,{ref:s})})}const U=({children:o,initial:n,isPresent:e,onExitComplete:s,custom:C,presenceAffectsLayout:h,mode:u})=>{const i=P(W),p=t.useId(),r=t.useCallback(f=>{i.set(f,!0);for(const g of i.values())if(!g)return;s&&s()},[i,s]),d=t.useMemo(()=>({id:p,initial:n,isPresent:e,custom:C,onExitComplete:r,register:f=>(i.set(f,!1),()=>i.delete(f))}),h?[Math.random(),r]:[e,r]);return t.useMemo(()=>{i.forEach((f,g)=>i.set(g,!1))},[e]),t.useEffect(()=>{!e&&!i.size&&s&&s()},[e]),u==="popLayout"&&(o=a.jsx(T,{isPresent:e,children:o})),a.jsx(N.Provider,{value:d,children:o})};function W(){return new Map}const v=o=>o.key||"";function M(o){const n=[];return t.Children.forEach(o,e=>{t.isValidElement(e)&&n.push(e)}),n}const A=({children:o,custom:n,initial:e=!0,onExitComplete:s,presenceAffectsLayout:C=!0,mode:h="sync",propagate:u=!1})=>{const[i,p]=$(u),r=t.useMemo(()=>M(o),[o]),d=u&&!i?[]:r.map(v),f=t.useRef(!0),g=t.useRef(r),w=P(()=>new Map),[L,z]=t.useState(r),[m,R]=t.useState(r);B(()=>{f.current=!1,g.current=r;for(let c=0;c<m.length;c++){const l=v(m[c]);d.includes(l)?w.delete(l):w.get(l)!==!0&&w.set(l,!1)}},[m,d.length,d.join("-")]);const y=[];if(r!==L){let c=[...r];for(let l=0;l<m.length;l++){const x=m[l],k=v(x);d.includes(k)||(c.splice(l,0,x),y.push(x))}h==="wait"&&y.length&&(c=y),R(M(c)),z(r);return}const{forceRender:j}=t.useContext(D);return a.jsx(a.Fragment,{children:m.map(c=>{const l=v(c),x=u&&!i?!1:r===m||d.includes(l),k=()=>{if(w.has(l))w.set(l,!0);else return;let b=!0;w.forEach(S=>{S||(b=!1)}),b&&(j?.(),R(g.current),u&&p?.(),s&&s())};return a.jsx(U,{isPresent:x,initial:!f.current||e?void 0:!1,custom:x?void 0:n,presenceAffectsLayout:C,mode:h,onExitComplete:x?void 0:k,children:c},l)})})};function O({children:o}){const[n,e]=t.useState(!1);return a.jsxs("div",{className:"relative",children:[a.jsx(A,{initial:!1,children:a.jsxs(E.div,{initial:"collapsed",animate:n?"expanded":"collapsed",exit:"collapsed",variants:{expanded:{height:"auto"},collapsed:{height:"50px"}},transition:{duration:.5,ease:[.04,.62,.23,.98]},className:"relative flex flex-col gap-4 overflow-hidden",children:[o,!n&&a.jsx(E.div,{className:"absolute bottom-0 h-12 w-full bg-gradient-to-t from-white dark:from-black",initial:{opacity:1},exit:{opacity:0}})]},"content")}),a.jsxs("button",{onClick:()=>e(!n),className:"group/more flex w-fit cursor-pointer items-center justify-center gap-1.5 text-xs text-black/80 underline duration-300 hover:text-black hover:transition-colors dark:text-white/80 dark:hover:text-white",children:[a.jsx("span",{children:n?"Show less":"Show more"}),a.jsx(E.svg,{animate:{rotate:n?180:0},transition:{duration:.3},className:"h-4 w-4 duration-200 ease-out group-hover/more:translate-y-0.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]})]})}export{O as default};
